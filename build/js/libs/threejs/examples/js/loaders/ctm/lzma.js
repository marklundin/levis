var LZMA=LZMA||{};LZMA.OutWindow=function(){this._windowSize=0};LZMA.OutWindow.prototype.create=function(e){if(!this._buffer||this._windowSize!==e)this._buffer=[];this._windowSize=e;this._pos=0;this._streamPos=0};LZMA.OutWindow.prototype.flush=function(){var e=this._pos-this._streamPos;if(0!==e){for(;e--;)this._stream.writeByte(this._buffer[this._streamPos++]);if(this._pos>=this._windowSize)this._pos=0;this._streamPos=this._pos}};LZMA.OutWindow.prototype.releaseStream=function(){this.flush();this._stream=null};LZMA.OutWindow.prototype.setStream=function(e){this.releaseStream();this._stream=e};LZMA.OutWindow.prototype.init=function(e){if(!e){this._streamPos=0;this._pos=0}};LZMA.OutWindow.prototype.copyBlock=function(e,t){var i=this._pos-e-1;if(0>i)i+=this._windowSize;for(;t--;){if(i>=this._windowSize)i=0;this._buffer[this._pos++]=this._buffer[i++];if(this._pos>=this._windowSize)this.flush()}};LZMA.OutWindow.prototype.putByte=function(e){this._buffer[this._pos++]=e;if(this._pos>=this._windowSize)this.flush()};LZMA.OutWindow.prototype.getByte=function(e){var t=this._pos-e-1;if(0>t)t+=this._windowSize;return this._buffer[t]};LZMA.RangeDecoder=function(){};LZMA.RangeDecoder.prototype.setStream=function(e){this._stream=e};LZMA.RangeDecoder.prototype.releaseStream=function(){this._stream=null};LZMA.RangeDecoder.prototype.init=function(){var e=5;this._code=0;this._range=-1;for(;e--;)this._code=this._code<<8|this._stream.readByte()};LZMA.RangeDecoder.prototype.decodeDirectBits=function(e){var t,i=0,r=e;for(;r--;){this._range>>>=1;t=this._code-this._range>>>31;this._code-=this._range&t-1;i=i<<1|1-t;if(0===(4278190080&this._range)){this._code=this._code<<8|this._stream.readByte();this._range<<=8}}return i};LZMA.RangeDecoder.prototype.decodeBit=function(e,t){var i=e[t],r=(this._range>>>11)*i;if((2147483648^this._code)<(2147483648^r)){this._range=r;e[t]+=2048-i>>>5;if(0===(4278190080&this._range)){this._code=this._code<<8|this._stream.readByte();this._range<<=8}return 0}this._range-=r;this._code-=r;e[t]-=i>>>5;if(0===(4278190080&this._range)){this._code=this._code<<8|this._stream.readByte();this._range<<=8}return 1};LZMA.initBitModels=function(e,t){for(;t--;)e[t]=1024};LZMA.BitTreeDecoder=function(e){this._models=[];this._numBitLevels=e};LZMA.BitTreeDecoder.prototype.init=function(){LZMA.initBitModels(this._models,1<<this._numBitLevels)};LZMA.BitTreeDecoder.prototype.decode=function(e){var t=1,i=this._numBitLevels;for(;i--;)t=t<<1|e.decodeBit(this._models,t);return t-(1<<this._numBitLevels)};LZMA.BitTreeDecoder.prototype.reverseDecode=function(e){var t,i=1,r=0,n=0;for(;n<this._numBitLevels;++n){t=e.decodeBit(this._models,i);i=i<<1|t;r|=t<<n}return r};LZMA.reverseDecode2=function(e,t,i,r){var n,o=1,a=0,s=0;for(;r>s;++s){n=i.decodeBit(e,t+o);o=o<<1|n;a|=n<<s}return a};LZMA.LenDecoder=function(){this._choice=[];this._lowCoder=[];this._midCoder=[];this._highCoder=new LZMA.BitTreeDecoder(8);this._numPosStates=0};LZMA.LenDecoder.prototype.create=function(e){for(;this._numPosStates<e;++this._numPosStates){this._lowCoder[this._numPosStates]=new LZMA.BitTreeDecoder(3);this._midCoder[this._numPosStates]=new LZMA.BitTreeDecoder(3)}};LZMA.LenDecoder.prototype.init=function(){var e=this._numPosStates;LZMA.initBitModels(this._choice,2);for(;e--;){this._lowCoder[e].init();this._midCoder[e].init()}this._highCoder.init()};LZMA.LenDecoder.prototype.decode=function(e,t){if(0===e.decodeBit(this._choice,0))return this._lowCoder[t].decode(e);if(0===e.decodeBit(this._choice,1))return 8+this._midCoder[t].decode(e);else return 16+this._highCoder.decode(e)};LZMA.Decoder2=function(){this._decoders=[]};LZMA.Decoder2.prototype.init=function(){LZMA.initBitModels(this._decoders,768)};LZMA.Decoder2.prototype.decodeNormal=function(e){var t=1;do t=t<<1|e.decodeBit(this._decoders,t);while(256>t);return 255&t};LZMA.Decoder2.prototype.decodeWithMatchByte=function(e,t){var i,r,n=1;do{i=1&t>>7;t<<=1;r=e.decodeBit(this._decoders,(1+i<<8)+n);n=n<<1|r;if(i!==r){for(;256>n;)n=n<<1|e.decodeBit(this._decoders,n);break}}while(256>n);return 255&n};LZMA.LiteralDecoder=function(){};LZMA.LiteralDecoder.prototype.create=function(e,t){var i;if(!this._coders||this._numPrevBits!==t||this._numPosBits!==e){this._numPosBits=e;this._posMask=(1<<e)-1;this._numPrevBits=t;this._coders=[];i=1<<this._numPrevBits+this._numPosBits;for(;i--;)this._coders[i]=new LZMA.Decoder2}};LZMA.LiteralDecoder.prototype.init=function(){var e=1<<this._numPrevBits+this._numPosBits;for(;e--;)this._coders[e].init()};LZMA.LiteralDecoder.prototype.getDecoder=function(e,t){return this._coders[((e&this._posMask)<<this._numPrevBits)+((255&t)>>>8-this._numPrevBits)]};LZMA.Decoder=function(){this._outWindow=new LZMA.OutWindow;this._rangeDecoder=new LZMA.RangeDecoder;this._isMatchDecoders=[];this._isRepDecoders=[];this._isRepG0Decoders=[];this._isRepG1Decoders=[];this._isRepG2Decoders=[];this._isRep0LongDecoders=[];this._posSlotDecoder=[];this._posDecoders=[];this._posAlignDecoder=new LZMA.BitTreeDecoder(4);this._lenDecoder=new LZMA.LenDecoder;this._repLenDecoder=new LZMA.LenDecoder;this._literalDecoder=new LZMA.LiteralDecoder;this._dictionarySize=-1;this._dictionarySizeCheck=-1;this._posSlotDecoder[0]=new LZMA.BitTreeDecoder(6);this._posSlotDecoder[1]=new LZMA.BitTreeDecoder(6);this._posSlotDecoder[2]=new LZMA.BitTreeDecoder(6);this._posSlotDecoder[3]=new LZMA.BitTreeDecoder(6)};LZMA.Decoder.prototype.setDictionarySize=function(e){if(0>e)return!1;if(this._dictionarySize!==e){this._dictionarySize=e;this._dictionarySizeCheck=Math.max(this._dictionarySize,1);this._outWindow.create(Math.max(this._dictionarySizeCheck,4096))}return!0};LZMA.Decoder.prototype.setLcLpPb=function(e,t,i){var r=1<<i;if(e>8||t>4||i>4)return!1;this._literalDecoder.create(t,e);this._lenDecoder.create(r);this._repLenDecoder.create(r);this._posStateMask=r-1;return!0};LZMA.Decoder.prototype.init=function(){var e=4;this._outWindow.init(!1);LZMA.initBitModels(this._isMatchDecoders,192);LZMA.initBitModels(this._isRep0LongDecoders,192);LZMA.initBitModels(this._isRepDecoders,12);LZMA.initBitModels(this._isRepG0Decoders,12);LZMA.initBitModels(this._isRepG1Decoders,12);LZMA.initBitModels(this._isRepG2Decoders,12);LZMA.initBitModels(this._posDecoders,114);this._literalDecoder.init();for(;e--;)this._posSlotDecoder[e].init();this._lenDecoder.init();this._repLenDecoder.init();this._posAlignDecoder.init();this._rangeDecoder.init()};LZMA.Decoder.prototype.decode=function(e,t,i){var r,n,o,a,s,l,h=0,c=0,u=0,f=0,d=0,p=0,m=0;this._rangeDecoder.setStream(e);this._outWindow.setStream(t);this.init();for(;0>i||i>p;){r=p&this._posStateMask;if(0===this._rangeDecoder.decodeBit(this._isMatchDecoders,(h<<4)+r)){n=this._literalDecoder.getDecoder(p++,m);if(h>=7)m=n.decodeWithMatchByte(this._rangeDecoder,this._outWindow.getByte(c));else m=n.decodeNormal(this._rangeDecoder);this._outWindow.putByte(m);h=4>h?0:h-(10>h?3:6)}else{if(1===this._rangeDecoder.decodeBit(this._isRepDecoders,h)){o=0;if(0===this._rangeDecoder.decodeBit(this._isRepG0Decoders,h)){if(0===this._rangeDecoder.decodeBit(this._isRep0LongDecoders,(h<<4)+r)){h=7>h?9:11;o=1}}else{if(0===this._rangeDecoder.decodeBit(this._isRepG1Decoders,h))a=u;else{if(0===this._rangeDecoder.decodeBit(this._isRepG2Decoders,h))a=f;else{a=d;d=f}f=u}u=c;c=a}if(0===o){o=2+this._repLenDecoder.decode(this._rangeDecoder,r);h=7>h?8:11}}else{d=f;f=u;u=c;o=2+this._lenDecoder.decode(this._rangeDecoder,r);h=7>h?7:10;s=this._posSlotDecoder[5>=o?o-2:3].decode(this._rangeDecoder);if(s>=4){l=(s>>1)-1;c=(2|1&s)<<l;if(14>s)c+=LZMA.reverseDecode2(this._posDecoders,c-s-1,this._rangeDecoder,l);else{c+=this._rangeDecoder.decodeDirectBits(l-4)<<4;c+=this._posAlignDecoder.reverseDecode(this._rangeDecoder);if(0>c){if(-1===c)break;return!1}}}else c=s}if(c>=p||c>=this._dictionarySizeCheck)return!1;this._outWindow.copyBlock(c,o);p+=o;m=this._outWindow.getByte(0)}}this._outWindow.flush();this._outWindow.releaseStream();this._rangeDecoder.releaseStream();return!0};LZMA.Decoder.prototype.setDecoderProperties=function(e){var t,i,r,n,o;if(e.size<5)return!1;t=e.readByte();i=t%9;t=~~(t/9);r=t%5;n=~~(t/5);if(!this.setLcLpPb(i,r,n))return!1;o=e.readByte();o|=e.readByte()<<8;o|=e.readByte()<<16;o+=16777216*e.readByte();return this.setDictionarySize(o)};LZMA.decompress=function(e,t,i,r){var n=new LZMA.Decoder;if(!n.setDecoderProperties(e))throw"Incorrect stream properties";if(!n.decode(t,i,r))throw"Error in data stream";return!0};