THREE.STLLoader=function(){},THREE.STLLoader.prototype={constructor:THREE.STLLoader},THREE.STLLoader.prototype.load=function(e,t){function i(i){if(200===i.target.status||0===i.target.status){var n=r.parse(i.target.response||i.target.responseText);r.dispatchEvent({type:"load",content:n}),t&&t(n)}else r.dispatchEvent({type:"error",message:"Couldn't load URL ["+e+"]",response:i.target.responseText})}var r=this,n=new XMLHttpRequest;n.addEventListener("load",i,!1),n.addEventListener("progress",function(e){r.dispatchEvent({type:"progress",loaded:e.loaded,total:e.total})},!1),n.addEventListener("error",function(){r.dispatchEvent({type:"error",message:"Couldn't load URL ["+e+"]"})},!1),n.overrideMimeType("text/plain; charset=x-user-defined"),n.open("GET",e,!0),n.responseType="arraybuffer",n.send(null)},THREE.STLLoader.prototype.parse=function(e){var t=function(){var e,t,r,n;return n=new DataView(i),t=50,r=n.getUint32(80,!0),e=84+r*t,e===n.byteLength},i=this.ensureBinary(e);return t()?this.parseBinary(i):this.parseASCII(this.ensureString(e))},THREE.STLLoader.prototype.parseBinary=function(e){var t,i,r,n,o,a,s,l,h,c,u;for(n=new DataView(e),r=n.getUint32(80,!0),i=new THREE.Geometry,l=84,h=50,t=0;r>t;t++){for(c=l+t*h,a=new THREE.Vector3(n.getFloat32(c,!0),n.getFloat32(c+4,!0),n.getFloat32(c+8,!0)),s=1;3>=s;s++)u=c+12*s,i.vertices.push(new THREE.Vector3(n.getFloat32(u,!0),n.getFloat32(u+4,!0),n.getFloat32(u+8,!0)));o=i.vertices.length,i.faces.push(new THREE.Face3(o-3,o-2,o-1,a))}return i.computeCentroids(),i.computeBoundingSphere(),i},THREE.STLLoader.prototype.parseASCII=function(e){var t,i,r,n,o,a,s,l;for(t=new THREE.Geometry,n=/facet([\s\S]*?)endfacet/g;null!=(s=n.exec(e));){for(l=s[0],o=/normal[\s]+([\-+]?[0-9]+\.?[0-9]*([eE][\-+]?[0-9]+)?)+[\s]+([\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?)+[\s]+([\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?)+/g;null!=(s=o.exec(l));)r=new THREE.Vector3(parseFloat(s[1]),parseFloat(s[3]),parseFloat(s[5]));for(a=/vertex[\s]+([\-+]?[0-9]+\.?[0-9]*([eE][\-+]?[0-9]+)?)+[\s]+([\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?)+[\s]+([\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?)+/g;null!=(s=a.exec(l));)t.vertices.push(new THREE.Vector3(parseFloat(s[1]),parseFloat(s[3]),parseFloat(s[5])));i=t.vertices.length,t.faces.push(new THREE.Face3(i-3,i-2,i-1,r))}return t.computeCentroids(),t.computeBoundingBox(),t.computeBoundingSphere(),t},THREE.STLLoader.prototype.ensureString=function(e){if("string"!=typeof e){for(var t=new Uint8Array(e),i="",r=0;r<e.byteLength;r++)i+=String.fromCharCode(t[r]);return i}return e},THREE.STLLoader.prototype.ensureBinary=function(e){if("string"==typeof e){for(var t=new Uint8Array(e.length),i=0;i<e.length;i++)t[i]=255&e.charCodeAt(i);return t.buffer||t}return e},THREE.EventDispatcher.prototype.apply(THREE.STLLoader.prototype),"undefined"==typeof DataView&&(DataView=function(e,t,i){this.buffer=e,this.byteOffset=t||0,this.byteLength=i||e.byteLength||e.length,this._isString="string"==typeof e},DataView.prototype={_getCharCodes:function(e,t,i){t=t||0,i=i||e.length;for(var r=t+i,n=[],o=t;r>o;o++)n.push(255&e.charCodeAt(o));return n},_getBytes:function(e,t,i){var r;if(void 0===i&&(i=this._littleEndian),t=void 0===t?this.byteOffset:this.byteOffset+t,void 0===e&&(e=this.byteLength-t),"number"!=typeof t)throw new TypeError("DataView byteOffset is not a number");if(0>e||t+e>this.byteLength)throw new Error("DataView length or (byteOffset+length) value is out of bounds");return r=this.isString?this._getCharCodes(this.buffer,t,t+e):this.buffer.slice(t,t+e),!i&&e>1&&(r instanceof Array||(r=Array.prototype.slice.call(r)),r.reverse()),r},getFloat64:function(e,t){var i=this._getBytes(8,e,t),r=1-2*(i[7]>>7),n=((255&i[7]<<1)<<3|i[6]>>4)-1023,o=(15&i[6])*Math.pow(2,48)+i[5]*Math.pow(2,40)+i[4]*Math.pow(2,32)+i[3]*Math.pow(2,24)+i[2]*Math.pow(2,16)+i[1]*Math.pow(2,8)+i[0];return 1024===n?0!==o?0/0:1/0*r:-1023===n?r*o*Math.pow(2,-1074):r*(1+o*Math.pow(2,-52))*Math.pow(2,n)},getFloat32:function(e,t){var i=this._getBytes(4,e,t),r=1-2*(i[3]>>7),n=(255&i[3]<<1|i[2]>>7)-127,o=(127&i[2])<<16|i[1]<<8|i[0];return 128===n?0!==o?0/0:1/0*r:-127===n?r*o*Math.pow(2,-149):r*(1+o*Math.pow(2,-23))*Math.pow(2,n)},getInt32:function(e,t){var i=this._getBytes(4,e,t);return i[3]<<24|i[2]<<16|i[1]<<8|i[0]},getUint32:function(e,t){return this.getInt32(e,t)>>>0},getInt16:function(e,t){return this.getUint16(e,t)<<16>>16},getUint16:function(e,t){var i=this._getBytes(2,e,t);return i[1]<<8|i[0]},getInt8:function(e){return this.getUint8(e)<<24>>24},getUint8:function(e){return this._getBytes(1,e)[0]}});