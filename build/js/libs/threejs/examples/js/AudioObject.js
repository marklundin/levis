THREE.AudioObject=function(e,t,i,r){function n(e){var t=new XMLHttpRequest;t.open("GET",e,!0);t.responseType="arraybuffer";t.onload=function(){g.source.buffer=g.context.createBuffer(t.response,!0);g.source.noteOn(0)};t.send()}THREE.Object3D.call(this);if(void 0===i)i=1;if(void 0===t)t=1;if(void 0===r)r=!0;if(!this.context)try{THREE.AudioObject.prototype.context=new webkitAudioContext}catch(o){console.warn("THREE.AudioObject: webkitAudioContext not found");return this}this.directionalSource=!1;this.listener=this.context.listener;this.panner=this.context.createPanner();this.source=this.context.createBufferSource();this.masterGainNode=this.context.createGainNode();this.dryGainNode=this.context.createGainNode();this.masterGainNode.gain.value=t;this.dryGainNode.gain.value=3;this.source.connect(this.panner);this.panner.connect(this.dryGainNode);this.dryGainNode.connect(this.masterGainNode);this.masterGainNode.connect(this.context.destination);this.source.playbackRate.value=i;this.source.loop=r;n(e);var a=new THREE.Vector3,s=new THREE.Vector3,l=new THREE.Vector3,h=new THREE.Vector3,c=new THREE.Vector3,u=new THREE.Vector3,f=new THREE.Vector3,d=new THREE.Vector3,p=new THREE.Vector3,m=new THREE.Vector3;var g=this;this.setVolume=function(e){this.masterGainNode.gain.value=e};this.update=function(e){l.copy(a);h.copy(s);a.getPositionFromMatrix(this.matrixWorld);s.getPositionFromMatrix(e.matrixWorld);c.subVectors(a,l);u.subVectors(s,h);m.copy(e.up);d.set(0,0,-1);d.transformDirection(e.matrixWorld);this.listener.setPosition(s.x,s.y,s.z);this.listener.setVelocity(u.x,u.y,u.z);this.listener.setOrientation(d.x,d.y,d.z,m.x,m.y,m.z);this.panner.setPosition(a.x,a.y,a.z);this.panner.setVelocity(c.x,c.y,c.z);if(this.directionalSource){f.set(0,0,-1);f.transformDirection(this.matrixWorld);p.copy(this.up);this.panner.setOrientation(f.x,f.y,f.z,p.x,p.y,p.z)}}};THREE.AudioObject.prototype=Object.create(THREE.Object3D.prototype);THREE.AudioObject.prototype.context=null;THREE.AudioObject.prototype.type=null;