var SimplexNoise=function(e){void 0==e&&(e=Math),this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.grad4=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],this.p=[];for(var t=0;256>t;t++)this.p[t]=Math.floor(256*e.random());this.perm=[];for(var t=0;512>t;t++)this.perm[t]=this.p[255&t];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]};SimplexNoise.prototype.dot=function(e,t,i){return e[0]*t+e[1]*i},SimplexNoise.prototype.dot3=function(e,t,i,r){return e[0]*t+e[1]*i+e[2]*r},SimplexNoise.prototype.dot4=function(e,t,i,r,n){return e[0]*t+e[1]*i+e[2]*r+e[3]*n},SimplexNoise.prototype.noise=function(e,t){var i,r,n,o,a,s=.5*(Math.sqrt(3)-1),l=(e+t)*s,h=Math.floor(e+l),c=Math.floor(t+l),u=(3-Math.sqrt(3))/6,d=(h+c)*u,p=h-d,f=c-d,m=e-p,g=t-f;m>g?(o=1,a=0):(o=0,a=1);var v=m-o+u,E=g-a+u,y=m-1+2*u,T=g-1+2*u,_=255&h,x=255&c,b=this.perm[_+this.perm[x]]%12,R=this.perm[_+o+this.perm[x+a]]%12,w=this.perm[_+1+this.perm[x+1]]%12,H=.5-m*m-g*g;0>H?i=0:(H*=H,i=H*H*this.dot(this.grad3[b],m,g));var S=.5-v*v-E*E;0>S?r=0:(S*=S,r=S*S*this.dot(this.grad3[R],v,E));var M=.5-y*y-T*T;return 0>M?n=0:(M*=M,n=M*M*this.dot(this.grad3[w],y,T)),70*(i+r+n)},SimplexNoise.prototype.noise3d=function(e,t,i){var r,n,o,a,s,l,h,c,u,d,p=1/3,f=(e+t+i)*p,m=Math.floor(e+f),g=Math.floor(t+f),v=Math.floor(i+f),E=1/6,y=(m+g+v)*E,T=m-y,_=g-y,x=v-y,b=e-T,R=t-_,w=i-x;b>=R?R>=w?(s=1,l=0,h=0,c=1,u=1,d=0):b>=w?(s=1,l=0,h=0,c=1,u=0,d=1):(s=0,l=0,h=1,c=1,u=0,d=1):w>R?(s=0,l=0,h=1,c=0,u=1,d=1):w>b?(s=0,l=1,h=0,c=0,u=1,d=1):(s=0,l=1,h=0,c=1,u=1,d=0);var H=b-s+E,S=R-l+E,M=w-h+E,C=b-c+2*E,D=R-u+2*E,A=w-d+2*E,P=b-1+3*E,L=R-1+3*E,k=w-1+3*E,I=255&m,N=255&g,O=255&v,z=this.perm[I+this.perm[N+this.perm[O]]]%12,F=this.perm[I+s+this.perm[N+l+this.perm[O+h]]]%12,V=this.perm[I+c+this.perm[N+u+this.perm[O+d]]]%12,U=this.perm[I+1+this.perm[N+1+this.perm[O+1]]]%12,B=.6-b*b-R*R-w*w;0>B?r=0:(B*=B,r=B*B*this.dot3(this.grad3[z],b,R,w));var j=.6-H*H-S*S-M*M;0>j?n=0:(j*=j,n=j*j*this.dot3(this.grad3[F],H,S,M));var W=.6-C*C-D*D-A*A;0>W?o=0:(W*=W,o=W*W*this.dot3(this.grad3[V],C,D,A));var G=.6-P*P-L*L-k*k;return 0>G?a=0:(G*=G,a=G*G*this.dot3(this.grad3[U],P,L,k)),32*(r+n+o+a)},SimplexNoise.prototype.noise4d=function(e,t,i,r){var n,o,a,s,l,h,c,u,d,p,f,m,g,v,E,y,T,_=this.grad4,x=this.simplex,b=this.perm,R=(Math.sqrt(5)-1)/4,w=(5-Math.sqrt(5))/20,H=(e+t+i+r)*R,S=Math.floor(e+H),M=Math.floor(t+H),C=Math.floor(i+H),D=Math.floor(r+H),A=(S+M+C+D)*w,P=S-A,L=M-A,k=C-A,I=D-A,N=e-P,O=t-L,z=i-k,F=r-I,V=N>O?32:0,U=N>z?16:0,B=O>z?8:0,j=N>F?4:0,W=O>F?2:0,G=z>F?1:0,X=V+U+B+j+W+G;h=x[X][0]>=3?1:0,c=x[X][1]>=3?1:0,u=x[X][2]>=3?1:0,d=x[X][3]>=3?1:0,p=x[X][0]>=2?1:0,f=x[X][1]>=2?1:0,m=x[X][2]>=2?1:0,g=x[X][3]>=2?1:0,v=x[X][0]>=1?1:0,E=x[X][1]>=1?1:0,y=x[X][2]>=1?1:0,T=x[X][3]>=1?1:0;var Y=N-h+w,q=O-c+w,K=z-u+w,Q=F-d+w,Z=N-p+2*w,$=O-f+2*w,J=z-m+2*w,et=F-g+2*w,tt=N-v+3*w,it=O-E+3*w,rt=z-y+3*w,nt=F-T+3*w,ot=N-1+4*w,at=O-1+4*w,st=z-1+4*w,lt=F-1+4*w,ht=255&S,ct=255&M,ut=255&C,dt=255&D,pt=b[ht+b[ct+b[ut+b[dt]]]]%32,ft=b[ht+h+b[ct+c+b[ut+u+b[dt+d]]]]%32,mt=b[ht+p+b[ct+f+b[ut+m+b[dt+g]]]]%32,gt=b[ht+v+b[ct+E+b[ut+y+b[dt+T]]]]%32,vt=b[ht+1+b[ct+1+b[ut+1+b[dt+1]]]]%32,Et=.6-N*N-O*O-z*z-F*F;0>Et?n=0:(Et*=Et,n=Et*Et*this.dot4(_[pt],N,O,z,F));var yt=.6-Y*Y-q*q-K*K-Q*Q;0>yt?o=0:(yt*=yt,o=yt*yt*this.dot4(_[ft],Y,q,K,Q));var Tt=.6-Z*Z-$*$-J*J-et*et;0>Tt?a=0:(Tt*=Tt,a=Tt*Tt*this.dot4(_[mt],Z,$,J,et));var _t=.6-tt*tt-it*it-rt*rt-nt*nt;0>_t?s=0:(_t*=_t,s=_t*_t*this.dot4(_[gt],tt,it,rt,nt));var xt=.6-ot*ot-at*at-st*st-lt*lt;return 0>xt?l=0:(xt*=xt,l=xt*xt*this.dot4(_[vt],ot,at,st,lt)),27*(n+o+a+s+l)};