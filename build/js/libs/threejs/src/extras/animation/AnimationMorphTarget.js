THREE.AnimationMorphTarget=function(e,t){this.root=e;this.data=THREE.AnimationHandler.get(t);this.hierarchy=THREE.AnimationHandler.parse(e);this.currentTime=0;this.timeScale=1;this.isPlaying=!1;this.isPaused=!0;this.loop=!0;this.influence=1};THREE.AnimationMorphTarget.prototype.play=function(e,t){if(!this.isPlaying){this.isPlaying=!0;this.loop=void 0!==e?e:!0;this.currentTime=void 0!==t?t:0;for(var i=0;i<this.hierarchy.length;i++){if(void 0===this.hierarchy[i].animationCache){this.hierarchy[i].animationCache={};this.hierarchy[i].animationCache.prevKey=0;this.hierarchy[i].animationCache.nextKey=0}this.hierarchy[i].animationCache.prevKey=this.data.hierarchy[i].keys[0];this.hierarchy[i].animationCache.nextKey=this.data.hierarchy[i].keys[1]}this.update(0)}this.isPaused=!1;THREE.AnimationHandler.addToUpdate(this)};THREE.AnimationMorphTarget.prototype.pause=function(){if(this.isPaused)THREE.AnimationHandler.addToUpdate(this);else THREE.AnimationHandler.removeFromUpdate(this);this.isPaused=!this.isPaused};THREE.AnimationMorphTarget.prototype.stop=function(){this.isPlaying=!1;this.isPaused=!1;THREE.AnimationHandler.removeFromUpdate(this);for(var e=0;e<this.hierarchy.length;e++)if(void 0!==this.hierarchy[e].animationCache)delete this.hierarchy[e].animationCache};THREE.AnimationMorphTarget.prototype.update=function(e){if(this.isPlaying){var t;var i,r;var n;var a;var o,s;this.currentTime+=e*this.timeScale;s=this.currentTime;o=this.currentTime=this.currentTime%this.data.length;for(var l=0,c=this.hierarchy.length;c>l;l++){n=this.hierarchy[l];a=n.animationCache;i=a.prevKey;r=a.nextKey;if(r.time<=s){if(s>o)if(this.loop){i=this.data.hierarchy[l].keys[0];r=this.data.hierarchy[l].keys[1];for(;r.time<o;){i=r;r=this.data.hierarchy[l].keys[r.index+1]}}else{this.stop();return}else do{i=r;r=this.data.hierarchy[l].keys[r.index+1]}while(r.time<o);a.prevKey=i;a.nextKey=r}t=(o-i.time)/(r.time-i.time);if(0>t||t>1){console.log("THREE.AnimationMorphTarget.update: Warning! Scale out of bounds:"+t);t=0>t?0:1}var h,u=i.morphTargetsInfluences;var f,d=r.morphTargetsInfluences;var p,m;for(p in u){h=u[p];f=d[p];m=this.root.getMorphTargetIndexByName(p);this.root.morphTargetInfluences[m]=(h+(f-h)*t)*this.influence}}}};