THREE.Shape=function(){THREE.Path.apply(this,arguments),this.holes=[]},THREE.Shape.prototype=Object.create(THREE.Path.prototype),THREE.Shape.prototype.extrude=function(e){var t=new THREE.ExtrudeGeometry(this,e);return t},THREE.Shape.prototype.makeGeometry=function(e){var t=new THREE.ShapeGeometry(this,e);return t},THREE.Shape.prototype.getPointsHoles=function(e){var t,i=this.holes.length,r=[];for(t=0;i>t;t++)r[t]=this.holes[t].getTransformedPoints(e,this.bends);return r},THREE.Shape.prototype.getSpacedPointsHoles=function(e){var t,i=this.holes.length,r=[];for(t=0;i>t;t++)r[t]=this.holes[t].getTransformedSpacedPoints(e,this.bends);return r},THREE.Shape.prototype.extractAllPoints=function(e){return{shape:this.getTransformedPoints(e),holes:this.getPointsHoles(e)}},THREE.Shape.prototype.extractPoints=function(e){return this.useSpacedPoints?this.extractAllSpacedPoints(e):this.extractAllPoints(e)},THREE.Shape.prototype.extractAllSpacedPoints=function(e){return{shape:this.getTransformedSpacedPoints(e),holes:this.getSpacedPointsHoles(e)}},THREE.Shape.Utils={removeHoles:function(e,t){var i,r,n,o,a,s,l,c,h,u,d,p,f,m,g,v,E=e.concat(),y=E.concat(),T=[];for(a=0;a<t.length;a++){for(l=t[a],Array.prototype.push.apply(y,l),c=Number.POSITIVE_INFINITY,s=0;s<l.length;s++){d=l[s];var _=[];for(u=0;u<E.length;u++)p=E[u],h=d.distanceToSquared(p),_.push(h),c>h&&(c=h,n=s,o=u)}i=o-1>=0?o-1:E.length-1,r=n-1>=0?n-1:l.length-1;var x=[l[n],E[o],E[i]],b=THREE.FontUtils.Triangulate.area(x),R=[l[n],l[r],E[o]],w=THREE.FontUtils.Triangulate.area(R),H=1,S=-1,M=o,C=n;o+=H,n+=S,0>o&&(o+=E.length),o%=E.length,0>n&&(n+=l.length),n%=l.length,i=o-1>=0?o-1:E.length-1,r=n-1>=0?n-1:l.length-1,x=[l[n],E[o],E[i]];var A=THREE.FontUtils.Triangulate.area(x);R=[l[n],l[r],E[o]];var D=THREE.FontUtils.Triangulate.area(R);b+w>A+D&&(o=M,n=C,0>o&&(o+=E.length),o%=E.length,0>n&&(n+=l.length),n%=l.length,i=o-1>=0?o-1:E.length-1,r=n-1>=0?n-1:l.length-1),f=E.slice(0,o),m=E.slice(o),g=l.slice(n),v=l.slice(0,n);var P=[l[n],E[o],E[i]],L=[l[n],l[r],E[o]];T.push(P),T.push(L),E=f.concat(g).concat(v).concat(m)}return{shape:E,isolatedPts:T,allpoints:y}},triangulateShape:function(e,t){var i,r,n,o,a,s,l=THREE.Shape.Utils.removeHoles(e,t),c=l.shape,h=l.allpoints,u=l.isolatedPts,d=THREE.FontUtils.Triangulate(c,!1),p={};for(i=0,r=h.length;r>i;i++)a=h[i].x+":"+h[i].y,void 0!==p[a]&&console.log("Duplicate point",a),p[a]=i;for(i=0,r=d.length;r>i;i++)for(o=d[i],n=0;3>n;n++)a=o[n].x+":"+o[n].y,s=p[a],void 0!==s&&(o[n]=s);for(i=0,r=u.length;r>i;i++)for(o=u[i],n=0;3>n;n++)a=o[n].x+":"+o[n].y,s=p[a],void 0!==s&&(o[n]=s);return d.concat(u)},isClockWise:function(e){return THREE.FontUtils.Triangulate.area(e)<0},b2p0:function(e,t){var i=1-e;return i*i*t},b2p1:function(e,t){return 2*(1-e)*e*t},b2p2:function(e,t){return e*e*t},b2:function(e,t,i,r){return this.b2p0(e,t)+this.b2p1(e,i)+this.b2p2(e,r)},b3p0:function(e,t){var i=1-e;return i*i*i*t},b3p1:function(e,t){var i=1-e;return 3*i*i*e*t},b3p2:function(e,t){var i=1-e;return 3*i*e*e*t},b3p3:function(e,t){return e*e*e*t},b3:function(e,t,i,r,n){return this.b3p0(e,t)+this.b3p1(e,i)+this.b3p2(e,r)+this.b3p3(e,n)}};