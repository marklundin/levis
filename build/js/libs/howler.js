/*!
 *  howler.js v1.1.11
 *  howlerjs.com
 *
 *  (c) 2013, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */

!function(){var e={};var t=null,i=!0,r=!1;if("undefined"!=typeof AudioContext)t=new AudioContext;else if("undefined"!=typeof webkitAudioContext)t=new webkitAudioContext;else if("undefined"!=typeof Audio)i=!1;else{i=!1;r=!0}if(i){var n="undefined"==typeof t.createGain?t.createGainNode():t.createGain();n.gain.value=1;n.connect(t.destination)}var o=function(){this._volume=1;this._muted=!1;this.usingWebAudio=i;this._howls=[]};o.prototype={volume:function(e){var t=this;e=parseFloat(e);if(e&&e>=0&&1>=e){t._volume=e;if(i)n.gain.value=e;for(var r in t._howls)if(t._howls.hasOwnProperty(r)&&t._howls[r]._webAudio===!1)for(var o=0;o<t._howls[r]._audioNode.length;o++)t._howls[r]._audioNode[o].volume=t._howls[r]._volume*t._volume;return t}return i?n.gain.value:t._volume},mute:function(){this._setMuted(!0);return this},unmute:function(){this._setMuted(!1);return this},_setMuted:function(e){var t=this;t._muted=e;if(i)n.gain.value=e?0:t._volume;for(var r in t._howls)if(t._howls.hasOwnProperty(r)&&t._howls[r]._webAudio===!1)for(var o=0;o<t._howls[r]._audioNode.length;o++)t._howls[r]._audioNode[o].muted=e}};var a=new o;var s=null;if(!r){s=new Audio;var l={mp3:!!s.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!s.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!s.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!s.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),m4a:!!(s.canPlayType("audio/x-m4a;")||s.canPlayType("audio/aac;")).replace(/^no$/,""),webm:!!s.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")}}var h=function(e){var t=this;t._autoplay=e.autoplay||!1;t._buffer=e.buffer||!1;t._duration=e.duration||0;t._format=e.format||null;t._loop=e.loop||!1;t._loaded=!1;t._sprite=e.sprite||{};t._src=e.src||"";t._pos3d=e.pos3d||[0,0,-.5];t._volume=e.volume||1;t._urls=e.urls||[];t._onload=[e.onload||function(){}];t._onloaderror=[e.onloaderror||function(){}];t._onend=[e.onend||function(){}];t._onpause=[e.onpause||function(){}];t._onplay=[e.onplay||function(){}];t._onendTimer=[];t._webAudio=i&&!t._buffer;t._audioNode=[];if(t._webAudio)t._setupAudioNode();a._howls.push(t);t.load()};h.prototype={load:function(){var t=this,i=null;if(!r){var n={mp3:l.mp3,opus:l.opus,ogg:l.ogg,wav:l.wav,m4a:l.m4a,weba:l.webm};for(var o=0;o<t._urls.length;o++){var s;if(t._format)s=t._format;else{s=t._urls[o].toLowerCase().match(/.+\.([^?]+)(\?|$)/);s=s&&s.length>=2?s[1]:t._urls[o].toLowerCase().match(/data\:audio\/([^?]+);/)[1]}if(n[s]){i=t._urls[o];break}}if(i){t._src=i;if(t._webAudio)c(t,i);else{var h=new Audio;t._audioNode.push(h);h.src=i;h._pos=0;h.preload="auto";h.volume=a._muted?0:t._volume*a.volume();e[i]=t;var u=function(){t._duration=h.duration;if(0===Object.getOwnPropertyNames(t._sprite).length)t._sprite={_default:[0,1e3*t._duration]};if(!t._loaded){t._loaded=!0;t.on("load")}if(t._autoplay)t.play();h.removeEventListener("canplaythrough",u,!1)};h.addEventListener("canplaythrough",u,!1);h.load()}return t}else t.on("loaderror")}else t.on("loaderror")},urls:function(e){var t=this;if(e){t.stop();t._urls="string"==typeof e?[e]:e;t._loaded=!1;t.load();return t}else return t._urls},play:function(e,i){var r=this;if("function"==typeof e)i=e;if(!e||"function"==typeof e)e="_default";if(!r._loaded){r.on("load",function(){r.play(e,i)});return r}if(!r._sprite[e]){if("function"==typeof i)i();return r}r._inactiveNode(function(n){n._sprite=e;var o=n._pos>0?n._pos:r._sprite[e][0]/1e3,s=r._sprite[e][1]/1e3-n._pos;var l=!(!r._loop&&!r._sprite[e][2]);var h,c="string"==typeof i?i:Math.round(Date.now()*Math.random())+"";!function(){var t={id:c,sprite:e,loop:l};h=setTimeout(function(){if(!r._webAudio&&l)r.stop(t.id,t.timer).play(e,t.id);if(r._webAudio&&!l)r._nodeById(t.id).paused=!0;if(!r._webAudio&&!l)r.stop(t.id,t.timer);r.on("end",c)},1e3*s);r._onendTimer.push(h);t.timer=r._onendTimer[r._onendTimer.length-1]}();if(r._webAudio){var u=r._sprite[e][0]/1e3,d=r._sprite[e][1]/1e3;n.id=c;n.paused=!1;f(r,[l,u,d],c);r._playStart=t.currentTime;n.gain.value=r._volume;if("undefined"==typeof n.bufferSource.start)n.bufferSource.noteGrainOn(0,o,s);else n.bufferSource.start(0,o,s)}else if(4===n.readyState){n.id=c;n.currentTime=o;n.muted=a._muted;n.volume=r._volume*a.volume();setTimeout(function(){n.play()},0)}else{r._clearEndTimer(h);!function(){var t=r,o=e,a=i,s=n;var l=function(){t.play(o,a);s.removeEventListener("canplaythrough",l,!1)};s.addEventListener("canplaythrough",l,!1)}();return r}r.on("play");if("function"==typeof i)i(c);return r});return r},pause:function(e,t){var i=this;if(!i._loaded){i.on("play",function(){i.pause(e)});return i}i._clearEndTimer(t||0);var r=e?i._nodeById(e):i._activeNode();if(r){r._pos=i.pos(null,e);if(i._webAudio){if(!r.bufferSource)return i;r.paused=!0;if("undefined"==typeof r.bufferSource.stop)r.bufferSource.noteOff(0);else r.bufferSource.stop(0)}else r.pause()}i.on("pause");return i},stop:function(e,t){var i=this;if(!i._loaded){i.on("play",function(){i.stop(e)});return i}i._clearEndTimer(t||0);var r=e?i._nodeById(e):i._activeNode();if(r){r._pos=0;if(i._webAudio){if(!r.bufferSource)return i;r.paused=!0;if("undefined"==typeof r.bufferSource.stop)r.bufferSource.noteOff(0);else r.bufferSource.stop(0)}else{r.pause();r.currentTime=0}}return i},mute:function(e){var t=this;if(!t._loaded){t.on("play",function(){t.mute(e)});return t}var i=e?t._nodeById(e):t._activeNode();if(i)if(t._webAudio)i.gain.value=0;else i.volume=0;return t},unmute:function(e){var t=this;if(!t._loaded){t.on("play",function(){t.unmute(e)});return t}var i=e?t._nodeById(e):t._activeNode();if(i)if(t._webAudio)i.gain.value=t._volume;else i.volume=t._volume;return t},volume:function(e,t){var i=this;e=parseFloat(e);if(e>=0&&1>=e){i._volume=e;if(!i._loaded){i.on("play",function(){i.volume(e,t)});return i}var r=t?i._nodeById(t):i._activeNode();if(r)if(i._webAudio)r.gain.value=e;else r.volume=e*a.volume();return i}else return i._volume},loop:function(e){var t=this;if("boolean"==typeof e){t._loop=e;return t}else return t._loop},sprite:function(e){var t=this;if("object"==typeof e){t._sprite=e;return t}else return t._sprite},pos:function(e,i){var r=this;if(!r._loaded){r.on("load",function(){r.pos(e)});return"number"==typeof e?r:r._pos||0}e=parseFloat(e);var n=i?r._nodeById(i):r._activeNode();if(n)if(r._webAudio)if(e>=0){n._pos=e;r.pause(i).play(n._sprite,i);return r}else return n._pos+(t.currentTime-r._playStart);else if(e>=0){n.currentTime=e;return r}else return n.currentTime;else if(e>=0)return r;else for(var o=0;o<r._audioNode.length;o++)if(r._audioNode[o].paused&&4===r._audioNode[o].readyState)return r._webAudio?r._audioNode[o]._pos:r._audioNode[o].currentTime},pos3d:function(e,t,i,r){var n=this;t="undefined"==typeof t||!t?0:t;i="undefined"==typeof i||!i?-.5:i;if(!n._loaded){n.on("play",function(){n.pos3d(e,t,i,r)});return n}if(e>=0||0>e){if(n._webAudio){var o=r?n._nodeById(r):n._activeNode();if(o){n._pos3d=[e,t,i];o.panner.setPosition(e,t,i)}}}else return n._pos3d;return n},fade:function(e,t,i,r,n){var o=this,a=Math.abs(e-t),s=e>t?"down":"up",l=a/.01,h=i/l;if(!o._loaded){o.on("load",function(){o.fade(e,t,i,r,n)});return o}o.volume(e,n);for(var c=1;l>=c;c++)!function(){var e=o._volume+("up"===s?.01:-.01)*c,i=Math.round(1e3*e)/1e3,a=t;setTimeout(function(){o.volume(i,n);if(i===a)if(r)r()},h*c)}()},fadeIn:function(e,t,i){return this.volume(0).play().fade(0,e,t,i)},fadeOut:function(e,t,i,r){var n=this;return n.fade(n._volume,e,t,function(){if(i)i();n.pause(r);n.on("end")},r)},_nodeById:function(e){var t=this,i=t._audioNode[0];for(var r=0;r<t._audioNode.length;r++)if(t._audioNode[r].id===e){i=t._audioNode[r];break}return i},_activeNode:function(){var e=this,t=null;for(var i=0;i<e._audioNode.length;i++)if(!e._audioNode[i].paused){t=e._audioNode[i];break}e._drainPool();return t},_inactiveNode:function(e){var t=this,i=null;for(var r=0;r<t._audioNode.length;r++)if(t._audioNode[r].paused&&4===t._audioNode[r].readyState){e(t._audioNode[r]);i=!0;break}t._drainPool();if(!i){var n;if(t._webAudio){n=t._setupAudioNode();e(n)}else{t.load();n=t._audioNode[t._audioNode.length-1];n.addEventListener("loadedmetadata",function(){e(n)})}}},_drainPool:function(){var e,t=this,i=0;for(e=0;e<t._audioNode.length;e++)if(t._audioNode[e].paused)i++;for(e=t._audioNode.length-1;e>=0&&!(5>=i);e--)if(t._audioNode[e].paused){if(t._webAudio)t._audioNode[e].disconnect(0);i--;t._audioNode.splice(e,1)}},_clearEndTimer:function(e){var t=this,i=t._onendTimer.indexOf(e);i=i>=0?i:0;if(t._onendTimer[i]){clearTimeout(t._onendTimer[i]);t._onendTimer.splice(i,1)}},_setupAudioNode:function(){var e=this,i=e._audioNode,r=e._audioNode.length;i[r]="undefined"==typeof t.createGain?t.createGainNode():t.createGain();i[r].gain.value=e._volume;i[r].paused=!0;i[r]._pos=0;i[r].readyState=4;i[r].connect(n);i[r].panner=t.createPanner();i[r].panner.setPosition(e._pos3d[0],e._pos3d[1],e._pos3d[2]);i[r].panner.connect(i[r]);return i[r]},on:function(e,t){var i=this,r=i["_on"+e];if("function"==typeof t)r.push(t);else for(var n=0;n<r.length;n++)if(t)r[n].call(i,t);else r[n].call(i);return i},off:function(e,t){var i=this,r=i["_on"+e],n=t.toString();for(var o=0;o<r.length;o++)if(n===r[o].toString()){r.splice(o,1);break}return i},unload:function(){var t=this;var i=t._audioNode;for(var r=0;r<t._audioNode.length;r++){t.stop(i[r].id);if(!t._webAudio)i[r].src="";else i[r].disconnect(0)}var n=a._howls.indexOf(t);if(n)a._howls.splice(n,1);delete e[t._src];t=null}};if(i){var c=function(i,r){if(r in e){i._duration=e[r].duration;u(i)}else{var n=new XMLHttpRequest;n.open("GET",r,!0);n.responseType="arraybuffer";n.onload=function(){t.decodeAudioData(n.response,function(t){if(t){e[r]=t;u(i,t)}})};n.onerror=function(){if(i._webAudio){i._buffer=!0;i._webAudio=!1;i._audioNode=[];delete i._gainNode;i.load()}};try{n.send()}catch(o){n.onerror()}}};var u=function(e,t){e._duration=t?t.duration:e._duration;if(0===Object.getOwnPropertyNames(e._sprite).length)e._sprite={_default:[0,1e3*e._duration]};if(!e._loaded){e._loaded=!0;e.on("load")}if(e._autoplay)e.play()};var f=function(i,r,n){var o=i._nodeById(n);o.bufferSource=t.createBufferSource();o.bufferSource.buffer=e[i._src];o.bufferSource.connect(o.panner);o.bufferSource.loop=r[0];if(r[0]){o.bufferSource.loopStart=r[1];o.bufferSource.loopEnd=r[1]+r[2]}}}if("function"==typeof define&&define.amd)define("Howler",[],function(){return{Howler:a,Howl:h}});else{window.Howler=a;window.Howl=h}}();